<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Housing Affordability in the United States: Prices, Income, and Interest Rates (2000–2025)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="02_analysis_eda_modeling_files/libs/clipboard/clipboard.min.js"></script>
<script src="02_analysis_eda_modeling_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="02_analysis_eda_modeling_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="02_analysis_eda_modeling_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="02_analysis_eda_modeling_files/libs/quarto-html/popper.min.js"></script>
<script src="02_analysis_eda_modeling_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="02_analysis_eda_modeling_files/libs/quarto-html/anchor.min.js"></script>
<link href="02_analysis_eda_modeling_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="02_analysis_eda_modeling_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="02_analysis_eda_modeling_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="02_analysis_eda_modeling_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="02_analysis_eda_modeling_files/libs/bootstrap/bootstrap-9e3ffae467580fdb927a41352e75a2e0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Housing Affordability in the United States: Prices, Income, and Interest Rates (2000–2025)</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<hr>
<section id="introduction" class="level3">
<h3 class="anchored" data-anchor-id="introduction">Introduction</h3>
<p>Housing affordability has become a central economic and policy concern in the United States, particularly in the years following the COVID-19 pandemic. Rapid home price appreciation, historically low interest rates, and subsequent monetary tightening have reshaped household purchasing power across metropolitan housing markets <span class="citation" data-cites="fred zillow_zhvi">(<a href="#ref-fred" role="doc-biblioref">Federal Reserve Bank of St. Louis, 2024</a>; <a href="#ref-zillow_zhvi" role="doc-biblioref">Zillow Group, 2024</a>)</span>. While rising prices are often cited as the primary driver of affordability stress, changes in financing conditions and income growth play equally important roles <span class="citation" data-cites="glaeser_gyourko_2018">(<a href="#ref-glaeser_gyourko_2018" role="doc-biblioref">Glaeser &amp; Gyourko, 2018</a>)</span>. Understanding these forces is essential for interpreting both the <strong>short-run dynamics</strong> and <strong>long-run structure</strong> of housing affordability.</p>
<p>This project analyzes housing affordability across U.S. metropolitan areas from 2000 to 2025 by integrating multiple public data sources into a unified metro-month panel. Zillow’s Home Value Index (ZHVI) provides a consistent measure of median home prices <span class="citation" data-cites="zillow_zhvi">(<a href="#ref-zillow_zhvi" role="doc-biblioref">Zillow Group, 2024</a>)</span>, while mortgage rates and inflation are drawn from the Federal Reserve Economic Data (FRED) system <span class="citation" data-cites="fred">(<a href="#ref-fred" role="doc-biblioref">Federal Reserve Bank of St. Louis, 2024</a>)</span>. Median household income is sourced from the American Community Survey (ACS) <span class="citation" data-cites="acs">(<a href="#ref-acs" role="doc-biblioref">U.S. Census Bureau, 2023</a>)</span> and expanded to monthly frequency using transparent annual constant imputation rules. Together, these data allow for a coherent examination of how prices, income, and interest rates jointly shape housing affordability over time.</p>
<p>The analysis is organized around three core questions. First, <strong>what drives short-run changes in housing affordability?</strong> In particular, how sensitive is affordability to changes in mortgage interest rates, which directly affect borrowing costs <span class="citation" data-cites="fred">(<a href="#ref-fred" role="doc-biblioref">Federal Reserve Bank of St. Louis, 2024</a>)</span>? Second, <strong>what explains long-run affordability trends across metropolitan areas?</strong> Specifically, to what extent does divergence between home prices and household income account for structural affordability erosion <span class="citation" data-cites="glaeser_gyourko_2018">(<a href="#ref-glaeser_gyourko_2018" role="doc-biblioref">Glaeser &amp; Gyourko, 2018</a>)</span>? Third, <strong>are recent affordability declines localized to specific regions, or are they broadly shared across metropolitan housing markets nationally?</strong></p>
<p>To address these questions, the project constructs a transparent affordability index that relates median household income to the estimated cost of financing a median-priced home. Exploratory data analysis is used to characterize national trends, regional heterogeneity, and distributional shifts in affordability <span class="citation" data-cites="case_shiller_1989">(<a href="#ref-case_shiller_1989" role="doc-biblioref">Case &amp; Shiller, 1989</a>)</span>. Regression models then quantify the elasticity of affordability with respect to mortgage rates, home prices, and income, and a counterfactual simulation evaluates how affordability would have evolved in the absence of recent interest-rate increases.</p>
<hr>
<p>Load the housing_panel model</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.6
✔ forcats   1.0.1     ✔ stringr   1.6.0
✔ ggplot2   4.0.1     ✔ tibble    3.3.1
✔ lubridate 1.9.4     ✔ tidyr     1.3.2
✔ purrr     1.2.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"./data/processed/housing_panel_model_metro_monthly.csv"</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="feature-engineering" class="level2">
<h2 class="anchored" data-anchor-id="feature-engineering">Feature Engineering</h2>
<section id="real-inflation-adjusted-home-prices" class="level3">
<h3 class="anchored" data-anchor-id="real-inflation-adjusted-home-prices">Real (Inflation-Adjusted) Home Prices</h3>
<p>Zillow Home Value Index (ZHVI) values are reported in <strong>nominal dollars</strong>, meaning they reflect both changes in home prices and changes in the general price level over time. For housing affordability analysis, however, <strong>real prices</strong>—adjusted for inflation—are more informative because household income and purchasing power are affected by economy-wide inflation.</p>
<p>To convert nominal home prices into real terms, ZHVI values are deflated using the Consumer Price Index (CPI):</p>
<p><span class="math display">\[
\text{Real Home Price}_{r,t}
= \frac{\text{ZHVI}_{r,t}}{\text{CPI}_t} \times 100
\]</span></p>
<p>In the code above:</p>
<ul>
<li><strong><code>zhvi</code></strong> represents the nominal Zillow Home Value Index</li>
<li><strong><code>cpi</code></strong> is the Consumer Price Index (indexed to a base year)</li>
<li>Multiplying by 100 re-scales the series so that real prices are expressed in constant-dollar terms relative to the CPI base period</li>
<li>Nominal prices are converted to real terms using the CPI following standard deflation methodology <span class="citation" data-cites="bls_cpi">(<a href="#ref-bls_cpi" role="doc-biblioref">U.S. Bureau of Labor Statistics, 2023</a>)</span></li>
</ul>
<hr>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="ot">&lt;-</span> housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">zhvi_real =</span> zhvi <span class="sc">/</span>cpi <span class="sc">*</span><span class="dv">100</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="monthly-mortgage-rate-and-payment-proxy" class="level3">
<h3 class="anchored" data-anchor-id="monthly-mortgage-rate-and-payment-proxy">Monthly Mortgage Rate and Payment Proxy</h3>
<p>Mortgage rates are typically reported as <strong>annual percentage rates (APR)</strong>. However, mortgage payments are made monthly, and affordability depends on the <strong>monthly cost of servicing debt</strong>, not the annual rate itself. To align financing costs with monthly housing and income data, the annual 30-year fixed mortgage rate is converted to a monthly rate.</p>
<p>Formally, the monthly mortgage rate is defined as:</p>
<p><span class="math display">\[
r_t^{\text{monthly}} = \frac{r_t^{\text{annual}}}{12 \times 100}
\]</span></p>
<p>In the code above:</p>
<ul>
<li><strong><code>mortgage_30y</code></strong> is the annual 30-year fixed mortgage rate expressed in percentage points</li>
<li>Dividing by 12 converts the rate to a monthly basis</li>
<li>Dividing by 100 converts the percentage into a decimal rate</li>
</ul>
<hr>
</section>
<section id="role-in-the-affordability-measure" class="level3">
<h3 class="anchored" data-anchor-id="role-in-the-affordability-measure">Role in the Affordability Measure</h3>
<p>The monthly mortgage rate enters directly into the <strong>mortgage payment proxy</strong>, which approximates the recurring cost of financing a median-priced home. Because mortgage payments are highly sensitive to interest rates, even relatively small changes in the monthly rate can produce large changes in required payments and, by extension, housing affordability.</p>
<p>Using a monthly rate ensures that:</p>
<ul>
<li>Financing costs are measured on the same temporal scale as prices and income</li>
<li>Short-run interest-rate shocks are accurately reflected in affordability dynamics</li>
<li>Subsequent regression coefficients have a clear economic interpretation as semi-elasticities</li>
</ul>
</section>
<section id="interpretation" class="level3">
<h3 class="anchored" data-anchor-id="interpretation">Interpretation</h3>
<p>An increase in the monthly mortgage rate raises required monthly payments for a given home price, reducing housing affordability even if prices and income remain unchanged. This mechanism explains the rapid affordability declines observed during periods of monetary tightening.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="ot">&lt;-</span> housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mortgage_rate_monthly =</span> mortgage_30y<span class="sc">/</span><span class="dv">12</span><span class="sc">/</span><span class="dv">100</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="simple-mortgage-payment-proxy-interest-only-approximation" class="level3">
<h3 class="anchored" data-anchor-id="simple-mortgage-payment-proxy-interest-only-approximation">Simple Mortgage Payment Proxy (Interest-Only Approximation)</h3>
<p>To approximate the cost of servicing a mortgage on a median-priced home, this analysis constructs a <strong>simple mortgage payment proxy</strong> based on an interest-only formulation. The proxy is defined as the product of the real home price and the monthly mortgage interest rate:</p>
<p><span class="math display">\[
\text{Mortgage Payment Proxy}_{r,t}
= \text{Real Home Price}_{r,t} \times r_t^{\text{monthly}}
\]</span></p>
<p>In the code above:</p>
<ul>
<li><strong><code>zhvi_real</code></strong> represents the inflation-adjusted median home price</li>
<li><strong><code>mortgage_rate_monthly</code></strong> is the monthly mortgage interest rate expressed in decimal form</li>
</ul>
<p>This formulation approximates the <strong>interest component</strong> of a monthly mortgage payment while abstracting from principal amortization, loan term length, and down payment assumptions.</p>
<p><em>This formulation follows standard housing finance and affordability measurement practices</em> <span class="citation" data-cites="fred glaeser_gyourko_2018">(<a href="#ref-fred" role="doc-biblioref">Federal Reserve Bank of St. Louis, 2024</a>; <a href="#ref-glaeser_gyourko_2018" role="doc-biblioref">Glaeser &amp; Gyourko, 2018</a>)</span>.</p>
<hr>
</section>
<section id="rationale-for-the-approximation" class="level3">
<h3 class="anchored" data-anchor-id="rationale-for-the-approximation">Rationale for the approximation</h3>
<p>The purpose of this proxy is <strong>comparative</strong>, not contractual. Rather than replicating an exact mortgage payment schedule, the proxy is designed to capture how <strong>changes in home prices and interest rates jointly affect financing costs over time</strong>.</p>
<p>This approximation is appropriate because:</p>
<ul>
<li>The <strong>interest-rate sensitivity</strong> of mortgage payments dominates short-run affordability changes</li>
<li>Amortization schedules and loan terms vary across borrowers but change slowly over time</li>
<li>Using a simplified proxy avoids imposing arbitrary assumptions about down payments or credit characteristics</li>
</ul>
<p>As a result, the proxy preserves the <strong>direction and relative magnitude</strong> of affordability changes driven by prices and rates, which is the primary focus of the analysis.</p>
<hr>
</section>
<section id="interpretation-and-limitations" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-and-limitations">Interpretation and limitations</h3>
<ul>
<li>Increases in real home prices or mortgage rates raise the proxy payment and reduce affordability</li>
<li>The proxy likely <strong>overstates payments</strong> relative to fully amortized mortgages at longer horizons</li>
<li>Results should be interpreted as <strong>relative affordability dynamics</strong>, not exact payment burdens</li>
</ul>
<p>This simplified mortgage payment proxy enables transparent decomposition of affordability into price, income, and interest-rate components, supporting both exploratory analysis and regression-based elasticity estimation.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="ot">&lt;-</span> housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mortgage_payment_proxy =</span> zhvi_real <span class="sc">*</span> mortgage_rate_monthly</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="core-affordability-index" class="level3">
<h3 class="anchored" data-anchor-id="core-affordability-index">Core Affordability Index</h3>
<p>The core housing affordability index measures a household’s capacity to service housing costs relative to income. It is defined as the ratio of <strong>median household income</strong> to an estimated <strong>mortgage payment proxy</strong> for a median-priced home.</p>
<p>Formally, for region ( r ) at time ( t ):</p>
<p><span class="math display">\[
\text{Affordability}_{r,t}
= \frac{\text{Income}_{r,t}}{\text{Mortgage Payment Proxy}_{r,t}}
\]</span></p>
<p>In the code above, this index is constructed as:</p>
<ul>
<li><strong><code>income_median_hh</code></strong>: Median household income for each metropolitan area</li>
<li><strong><code>mortgage_payment_proxy</code></strong>: An estimated monthly mortgage payment based on prevailing home prices and interest rates</li>
</ul>
<p>Higher values of the affordability index indicate greater housing affordability, as households have more income relative to required mortgage payments. Conversely, declines in the index reflect tighter affordability driven by rising home prices, higher interest rates, or slower income growth.</p>
<p><em>The affordability index follows standard housing economics practice by relating household income to the cost of financing housing, consistent with user-cost and affordability frameworks used in applied housing research</em> <span class="citation" data-cites="poterba_1984 glaeser_gyourko_2018">(<a href="#ref-glaeser_gyourko_2018" role="doc-biblioref">Glaeser &amp; Gyourko, 2018</a>; <a href="#ref-poterba_1984" role="doc-biblioref">Poterba, 1984</a>)</span>.</p>
<hr>
</section>
<section id="interpretation-and-properties" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-and-properties">Interpretation and Properties</h3>
<ul>
<li>The index is <strong>scale-invariant</strong>: changes over time and differences across regions are meaningful even if absolute levels vary.</li>
<li>Because mortgage payments depend directly on interest rates, the index is <strong>highly sensitive to financing conditions</strong>, particularly in the short run.</li>
<li>In the long run, affordability depends on the <strong>relative growth of income and home prices</strong>, with persistent price growth outpacing income leading to structural affordability erosion.</li>
</ul>
<p>This construction provides a transparent and economically intuitive measure of housing affordability that can be decomposed into price, income, and interest-rate components in subsequent analysis.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="ot">&lt;-</span> housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">affordability_index =</span> income_median_hh <span class="sc">/</span> mortgage_payment_proxy</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>The index captures how much household income is available relative to the cost of financing a median-priced home.</p>
</section>
<section id="log-transformed-variables-for-modeling" class="level3">
<h3 class="anchored" data-anchor-id="log-transformed-variables-for-modeling">Log-Transformed Variables (for modeling)</h3>
<p>Logs stabilizes variance and makes coefficients interpretable</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="ot">&lt;-</span> housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">log_zhvi_real =</span> <span class="fu">log</span>(zhvi_real),</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">log_income =</span> <span class="fu">log</span>(income_median_hh),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">log_affordability =</span> <span class="fu">log</span>(affordability_index)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="year-over-year-yoy-growth-rates" class="level3">
<h3 class="anchored" data-anchor-id="year-over-year-yoy-growth-rates">Year-over-Year (YoY) Growth Rates</h3>
<p>To measure changes in home prices and household income while minimizing seasonal effects, this analysis computes <strong>year-over-year (YoY) growth rates</strong>. For each metropolitan area, YoY growth compares the current value of a variable to its value in the same month one year earlier.</p>
<p>Formally, for a variable ( X_{r,t} ) observed in region ( r ) at month ( t ), the YoY growth rate is defined as:</p>
<p><span class="math display">\[
\text{YoY Growth}_{r,t} = \frac{X_{r,t}}{X_{r,t-12}} - 1\
\]</span></p>
<p>In the code above, YoY growth is calculated separately for:</p>
<ul>
<li><p><strong>Real home prices (<code>zhvi_yoy</code>)</strong>, using inflation-adjusted Zillow Home Value Index values</p></li>
<li><p><strong>Median household income (<code>income_yoy</code>)</strong>, using annual income estimates expanded to monthly frequency</p></li>
</ul>
<p>By using a 12-month lag, YoY growth removes predictable seasonal fluctuations and provides a consistent measure of underlying trend growth. This is particularly important for housing markets, where prices and transactions exhibit strong seasonal patterns.</p>
<p>YoY growth rates allow for meaningful comparison between home price dynamics and income growth. In the context of housing affordability, persistent periods in which home prices grow faster than household income signal structural affordability erosion, even in the absence of short-run financing shocks.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="ot">&lt;-</span> housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region_norm) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">zhvi_yoy =</span> (zhvi_real <span class="sc">/</span> <span class="fu">lag</span>(zhvi_real, <span class="dv">12</span>)) <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">income_yoy =</span> (income_median_hh<span class="sc">/</span> <span class="fu">lag</span>(income_median_hh, <span class="dv">12</span>))<span class="sc">-</span><span class="dv">1</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="check" class="level4">
<h4 class="anchored" data-anchor-id="check">Check</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_missing_affordability =</span> <span class="fu">mean</span>(<span class="fu">is.na</span>(affordability_index)),</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_affordability =</span> <span class="fu">min</span>(affordability_index, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_affordability =</span> <span class="fu">max</span>(affordability_index, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  pct_missing_affordability min_affordability max_affordability
                      &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;
1                   0.00398              30.5              836.</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="eda" class="level2">
<h2 class="anchored" data-anchor-id="eda">EDA</h2>
<section id="data-coverage-check" class="level3">
<h3 class="anchored" data-anchor-id="data-coverage-check">Data Coverage &amp; Check</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_regions =</span> <span class="fu">n_distinct</span>(region_norm),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">start_date =</span> <span class="fu">min</span>(date),</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">end_date =</span> <span class="fu">max</span>(date),</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_missing_affordability =</span> <span class="fu">mean</span>(<span class="fu">is.na</span>(affordability_index))</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  n_regions start_date end_date   pct_missing_affordability
      &lt;int&gt; &lt;date&gt;     &lt;date&gt;                         &lt;dbl&gt;
1       723 2000-01-01 2025-12-01                   0.00398</code></pre>
</div>
</div>
</section>
<section id="national-affordability-trend-aggregate-signal" class="level3">
<h3 class="anchored" data-anchor-id="national-affordability-trend-aggregate-signal">National Affordability Trend (Aggregate Signal)</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">affordability_med =</span> <span class="fu">median</span>(affordability_index, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(date, affordability_med)) <span class="sc">+</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Median Housing Affordability over Time"</span>,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Afffordability Index"</span>,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span><span class="cn">NULL</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">+</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02_analysis_eda_modeling_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="additional-analysis-and-historical-context" class="level3">
<h3 class="anchored" data-anchor-id="additional-analysis-and-historical-context">Additional Analysis and Historical Context</h3>
<p>The figure above shows the evolution of <strong>median housing affordability</strong> across U.S. metropolitan areas from 2000 to 2025. Two pronounced peaks are visible around <strong>2012</strong> and <strong>2021</strong>, periods during which median affordability reached its highest levels. In both cases, elevated affordability reflects unusually favorable financing conditions rather than sustained improvements in underlying price–income fundamentals.</p>
<p>The post-2008 increase in affordability occurred in the aftermath of the subprime mortgage crisis. Following the collapse of high-risk mortgage lending, housing prices declined sharply while interest rates fell to historically low levels. Although credit conditions tightened substantially—particularly for lower-income and marginal borrowers—the combined effect of lower prices and aggressive monetary easing temporarily improved median affordability. This period illustrates how affordability can recover even amid weak credit availability when prices and financing costs fall sufficiently.</p>
<p>Importantly, this recovery was supported by <strong>extraordinary policy intervention</strong>, including Federal Reserve liquidity programs, bank recapitalizations through the Troubled Asset Relief Program (TARP), and regulatory reforms such as the Dodd–Frank Act. These measures stabilized the financial system and reduced borrowing costs, but they did not fundamentally alter long-run housing supply constraints or income growth trends.</p>
<p>The second peak around 2021 reflects a markedly different dynamic. Unlike the post-2008 period, housing prices were already elevated, but mortgage rates reached historic lows. Low borrowing costs temporarily masked underlying affordability pressures, allowing median affordability to reach its highest observed level despite rising prices. Once interest rates increased rapidly beginning in 2022, affordability declined sharply and immediately.</p>
<p>This contrast highlights a key distinction between the two episodes. <strong>The post-2008 affordability recovery was driven by falling prices and policy-supported rate reductions following a credit collapse</strong>, whereas <strong>the post-2021 affordability decline reflects direct financing cost shocks rather than the unwinding of excess credit expansion</strong>. In the latter case, affordability deteriorated despite relatively stable credit quality, underscoring the dominant role of interest rates in short-run affordability dynamics.</p>
</section>
<section id="distribution-shift-then-vs.-now" class="level3">
<h3 class="anchored" data-anchor-id="distribution-shift-then-vs.-now">Distribution Shift (Then vs.&nbsp;Now)</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">%in%</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">"2015-01-01"</span>,<span class="st">"2023-01-01"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">period =</span> <span class="fu">factor</span>(date)) <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(affordability_index, <span class="at">fill =</span> period)) <span class="sc">+</span> </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Shift in Housing Affordability Distribution"</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Affordability Index"</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Density"</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02_analysis_eda_modeling_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The tale of two distributions suggest that 2015 has a wider distribution of affordability indexing across the U.S. whereas stronger affordability indexing signal drivers pushed affordability to much narrower distributional ranges. This shows structural and not noise driven change. This also demonstrates widespread stress, not localized shocks.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>top_metros <span class="ot">&lt;-</span> housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(region_norm, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">12</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(region_norm)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region_norm <span class="sc">%in%</span> top_metros) <span class="sc">%&gt;%</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(date, affordability_index)) <span class="sc">+</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> region_norm, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Housing Affordability by Major Metro"</span>,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Affordability Index"</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02_analysis_eda_modeling_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>While we can see smaller local and variable features between metros, overall our top metro listings share generally recognizable curve shape features. This includes a secondary spike signal just around 2011 and a primary spike signal at around 2020. It is worth noting that there may from metro to metro be a shared peak similarity between these two peaks while in other cases the secondary signal is diminished. Where the secondary signal is diminished may correspond to overall local economic conditions such as how these individual metros may have benefited from changes, for example, to mortgage rate pricing.</p>
</section>
<section id="what-drives-affordability-correlation-view" class="level3">
<h3 class="anchored" data-anchor-id="what-drives-affordability-correlation-view">What drives affordability? (Correlation View)</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    affordability_index,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    zhvi_real,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    mortgage_rate_monthly,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    income_median_hh</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>(<span class="at">use =</span> <span class="st">"complete.obs"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>                      affordability_index zhvi_real mortgage_rate_monthly
affordability_index                  1.00     -0.52                 -0.66
zhvi_real                           -0.52      1.00                  0.09
mortgage_rate_monthly               -0.66      0.09                  1.00
income_median_hh                    -0.05      0.60                  0.05
                      income_median_hh
affordability_index              -0.05
zhvi_real                         0.60
mortgage_rate_monthly             0.05
income_median_hh                  1.00</code></pre>
</div>
</div>
<p>Correlation analysis indicates that housing affordability is most strongly associated with mortgage interest rates (r = −0.66), followed by real home prices (r = −0.52). Median household income exhibits almost no direct correlation with affordability (r = −0.05), suggesting that income growth has not kept pace with price and financing pressures. These results highlight the dominant role of monetary conditions in shaping affordability outcomes across U.S. metropolitan areas.</p>
</section>
<section id="growth-mismatch-prices-vs-income" class="level3">
<h3 class="anchored" data-anchor-id="growth-mismatch-prices-vs-income">Growth Mismatch: Prices vs Income</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(zhvi_yoy), <span class="sc">!</span><span class="fu">is.na</span>(income_yoy)) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(zhvi_yoy, income_yoy)) <span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span>.<span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">"lm"</span>, <span class="at">se=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Price Growth vs Income Growth"</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Real Home Price YoY Growth"</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Income YoY Growth"</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02_analysis_eda_modeling_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Weak positive slope, huge dispersion with a fitted line slightly upward. The cloud is very wide. Income growth does not keep pace with price growth in any consistent way. Price growth regularly exceeds income growth. Many observations with price growth &gt; 10-20% while income growth is more centrally distributed around 0-5%. This is a core structural and asymmetric problem. Housing pricing routinely experiences double-digit growth, while income growth is typically low single digits.</p>
</section>
<section id="affordability-vs-mortgage-rates" class="level3">
<h3 class="anchored" data-anchor-id="affordability-vs-mortgage-rates">Affordability vs Mortgage Rates</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">affordability_med =</span> <span class="fu">median</span>(affordability_index, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mortgage_rate =</span> <span class="fu">mean</span>(mortgage_rate_monthly, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">affordability_idx =</span> affordability_med <span class="sc">/</span> <span class="fu">first</span>(affordability_med) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">mortgage_rate_idx =</span> mortgage_rate <span class="sc">/</span> <span class="fu">first</span>(mortgage_rate) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(affordability_idx, mortgage_rate_idx),</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"series"</span>,</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"index_value"</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(date, index_value, <span class="at">color =</span> series)) <span class="sc">+</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Indexed Affordability and Mortgage Rates (2000 = 100)"</span>,</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Index (2000 = 100)"</span>,</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="cn">NULL</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02_analysis_eda_modeling_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="eda-summary" class="level3">
<h3 class="anchored" data-anchor-id="eda-summary">EDA Summary</h3>
<p>Housing affordability declined sharply after 2021 and showed slow growth thereafter. Indexed Affordability to Mortgage Rates show that affordability signals are sensitive to mortgage rate pricing. After 2020 we see a sharp decline in affordability with a sharp signal increase in mortgage rate pricing, given that affordability indexing shares similar characteristics to 2008 signals, we may be tempted to conclude rate shock implicates similarly over time. Short run changes in housing affordability are dominated by interest-rate shocks rather than contemporaneous price movements. In other words, overall house pricing changes the affect of affordability more gradually while sudden rate increases translate into immediate higher monthly costs.</p>
</section>
</section>
<section id="modeling" class="level2">
<h2 class="anchored" data-anchor-id="modeling">Modeling</h2>
<p>Estimating elasticities</p>
<p>Starting with a baseline model</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>model_base <span class="ot">&lt;-</span> <span class="fu">lm</span>(</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  log_affordability <span class="sc">~</span> mortgage_rate_monthly <span class="sc">+</span> log_zhvi_real <span class="sc">+</span> log_income,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> housing_panel</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_base)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = log_affordability ~ mortgage_rate_monthly + log_zhvi_real + 
    log_income, data = housing_panel)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.070021 -0.024324 -0.008107  0.013498  0.157678 

Coefficients:
                        Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)            6.205e+00  3.634e-03    1708   &lt;2e-16 ***
mortgage_rate_monthly -2.420e+02  7.066e-02   -3424   &lt;2e-16 ***
log_zhvi_real         -1.007e+00  2.358e-04   -4268   &lt;2e-16 ***
log_income             1.036e+00  4.226e-04    2452   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.03464 on 186876 degrees of freedom
  (747 observations deleted due to missingness)
Multiple R-squared:  0.9944,    Adjusted R-squared:  0.9944 
F-statistic: 1.098e+07 on 3 and 186876 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<section id="baseline-log-linear-affordability-model" class="level3">
<h3 class="anchored" data-anchor-id="baseline-log-linear-affordability-model">Baseline Log-Linear Affordability Model</h3>
<p>We estimate the following log-linear specification:</p>
<p><span class="math display">\[
\log(\text{Affordability}_{r,t}) = \beta_0 + \beta_1 ,\text{MortgageRate}_{r,t} + \beta_2 \log(\text{ZHVI}_{r,t}) + \beta_3 \log(\text{Income}_{r,t}) + \varepsilon_{r,t}
\]</span></p>
<p>using a pooled metro–month panel.</p>
<hr>
</section>
<section id="coefficient-interpretation" class="level3">
<h3 class="anchored" data-anchor-id="coefficient-interpretation">Coefficient Interpretation</h3>
<section id="mortgage-rate-monthly" class="level4">
<h4 class="anchored" data-anchor-id="mortgage-rate-monthly">Mortgage Rate (Monthly)</h4>
<p><strong>Estimate:</strong> −242.0 <strong>p-value:</strong> &lt; 0.001</p>
<p>Mortgage rates exert a <strong>large and highly statistically significant</strong> effect on housing affordability. Because the mortgage rate enters in levels while affordability is logged, the coefficient captures a semi-elasticity.</p>
<p>A one percentage point increase in the <strong>annual</strong> mortgage rate corresponds to a monthly increase of approximately: <span class="math display">\[
0.01 / 12 \approx 0.00083
\]</span></p>
<p>The implied change in affordability is: <span class="math display">\[
\Delta \log(\text{Affordability}) \approx -242 \times 0.00083 \approx -0.20
\]</span></p>
<p><strong>Interpretation:</strong> A <strong>1 percentage point increase in the annual mortgage rate is associated with roughly a 20% decline in housing affordability</strong>, holding prices and income constant.</p>
<p>This result highlights the dominant role of financing conditions in driving short-run affordability dynamics.</p>
<hr>
</section>
<section id="real-home-prices-zhvi" class="level4">
<h4 class="anchored" data-anchor-id="real-home-prices-zhvi">Real Home Prices (ZHVI)</h4>
<p><strong>Estimate:</strong> −1.007 <strong>p-value:</strong> &lt; 0.001</p>
<p>Affordability exhibits approximately <strong>unit elasticity</strong> with respect to real home prices. A 1% increase in inflation-adjusted home values reduces affordability by roughly <strong>1%</strong>.</p>
<hr>
</section>
<section id="median-household-income" class="level4">
<h4 class="anchored" data-anchor-id="median-household-income">Median Household Income</h4>
<p><strong>Estimate:</strong> +1.036 <strong>p-value:</strong> &lt; 0.001</p>
<p>Affordability also exhibits near-unit elasticity with respect to income. A 1% increase in median household income raises affordability by approximately <strong>1%</strong>.</p>
<hr>
</section>
</section>
<section id="model-fit" class="level3">
<h3 class="anchored" data-anchor-id="model-fit">Model Fit</h3>
<ul>
<li><strong>R²:</strong> 0.994</li>
<li><strong>Adjusted R²:</strong> 0.994</li>
<li><strong>Residual standard error:</strong> 0.034</li>
</ul>
<p>The model explains nearly all variation in log affordability across metro–month observations, reflecting the mechanical and accounting-driven relationship between prices, income, interest rates, and payment-based affordability measures.</p>
<hr>
</section>
<section id="economic-interpretation" class="level3">
<h3 class="anchored" data-anchor-id="economic-interpretation">Economic Interpretation</h3>
<p>Taken together, these results imply:</p>
<ul>
<li><strong>Long-run affordability</strong> is governed by the <strong>relative growth of home prices and household income</strong>, consistent with standard housing economics.</li>
<li><strong>Short-run affordability fluctuations</strong>, however, are overwhelmingly driven by <strong>mortgage interest rates</strong>, with even modest rate increases producing large declines in purchasing power.</li>
</ul>
<p>This helps explain why affordability deteriorated so rapidly during post-2021 monetary tightening, even in markets where income growth remained strong.</p>
</section>
</section>
<section id="counterfactual-analysis-highest-roi" class="level2">
<h2 class="anchored" data-anchor-id="counterfactual-analysis-highest-roi">Counterfactual analysis (highest ROI)</h2>
<p><em>What if mortgage rates had not spiked?</em></p>
<p>Goal: We need to see how much of the post-2021 affordability collapse is attributable to mortgage rate increase holding prices and income fixed.</p>
<p>Using the preferred model</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>housing_panel <span class="ot">&lt;-</span> housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mortgage_rate_annual =</span> mortgage_rate_monthly<span class="sc">*</span><span class="dv">12</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>model_cf <span class="ot">&lt;-</span> <span class="fu">lm</span>(</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  log_affordability <span class="sc">~</span> mortgage_rate_annual <span class="sc">+</span> log_zhvi_real <span class="sc">+</span> log_income,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> housing_panel</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_cf)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = log_affordability ~ mortgage_rate_annual + log_zhvi_real + 
    log_income, data = housing_panel)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.070021 -0.024324 -0.008107  0.013498  0.157678 

Coefficients:
                       Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)           6.205e+00  3.634e-03    1708   &lt;2e-16 ***
mortgage_rate_annual -2.016e+01  5.889e-03   -3424   &lt;2e-16 ***
log_zhvi_real        -1.007e+00  2.358e-04   -4268   &lt;2e-16 ***
log_income            1.036e+00  4.226e-04    2452   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.03464 on 186876 degrees of freedom
  (747 observations deleted due to missingness)
Multiple R-squared:  0.9944,    Adjusted R-squared:  0.9944 
F-statistic: 1.098e+07 on 3 and 186876 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<section id="defining-the-counterfactual-scenario" class="level3">
<h3 class="anchored" data-anchor-id="defining-the-counterfactual-scenario">Defining the counterfactual scenario</h3>
<p>Simulating: Mortgage rates fixed at 3% annually.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>RATE_CF <span class="ot">&lt;-</span> .<span class="dv">03</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="predict-observed-vs-counterfactual-affordability" class="level3">
<h3 class="anchored" data-anchor-id="predict-observed-vs-counterfactual-affordability">Predict observed vs counterfactual affordability</h3>
<p>Adding predictions to the panel</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>housing_panel_cf <span class="ot">&lt;-</span> housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">#observed fitted values</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">log_afford_obs =</span> <span class="fu">predict</span>(model_cf, <span class="at">newdata=</span>housing_panel),</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">#counterfactual: replace rate with 3%</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">log_afford_cf =</span> <span class="fu">predict</span>(</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>      model_cf,</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">newdata =</span> housing_panel <span class="sc">%&gt;%</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">mortgage_rate_annual =</span> RATE_CF)</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">#convert back to levels</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">afford_obs =</span> <span class="fu">exp</span>(log_afford_obs),</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">afford_cf =</span> <span class="fu">exp</span>(log_afford_cf)</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="aggregate-nationally" class="level3">
<h3 class="anchored" data-anchor-id="aggregate-nationally">Aggregate nationally</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>cf_national <span class="ot">&lt;-</span> housing_panel_cf <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">affordability_obs =</span> <span class="fu">median</span>(afford_obs, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">affordability_cf  =</span> <span class="fu">median</span>(afford_cf,  <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="plot-the-counterfactual" class="level3">
<h3 class="anchored" data-anchor-id="plot-the-counterfactual">Plot the counterfactual</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>cf_national <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span><span class="fu">c</span>(affordability_obs, affordability_cf),</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"scenario"</span>,</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"affordability"</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(date, affordability, <span class="at">color=</span>scenario)) <span class="sc">+</span> </span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth=</span><span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Housing Affordability: Observed vs Counterfactual Mortgage Rate"</span>,</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Counterfactual assumes mortgage rates fixed at 3%"</span>,</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Affordability Index"</span>,</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="cn">NULL</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02_analysis_eda_modeling_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We see that observed affordability collapses after 2021 while the counterfactual line is much higher. The vertical gap is the rate-driven affordability loss.</p>
</section>
<section id="quantifying-the-effect" class="level3">
<h3 class="anchored" data-anchor-id="quantifying-the-effect">Quantifying the effect</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>cf_national <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date  <span class="sc">==</span> <span class="fu">as.Date</span>(<span class="st">"2023-01-01"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_loss_due_to_rates =</span> (affordability_cf <span class="sc">-</span> affordability_obs)<span class="sc">/</span>affordability_cf</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  date       affordability_obs affordability_cf pct_loss_due_to_rates
  &lt;date&gt;                 &lt;dbl&gt;            &lt;dbl&gt;                 &lt;dbl&gt;
1 2023-01-01              172.             332.                 0.483</code></pre>
</div>
</div>
<p>Affordability in early 2023 was <strong>~48% lower</strong> than it would have been if mortgage rates had remained at 3%</p>
<p>Using the estimated semi-elasticity of affordability to mortgage rates, I simulate a counterfactual scenario in which mortgage rates remained at 3%. The results indicate that the majority of the post-2021 decline in housing affordability is attributable to rising interest rates rather than contemporaneous changes in prices or income.</p>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>This analysis examined the evolution of housing affordability across U.S. metropolitan areas from 2000 to 2025 by integrating Zillow home value data, FRED mortgage rates and inflation, and Census median household income. By constructing a unified metro_month panel and a transparent affordability index, the analysis distinguishes between short-run affordability shocks and long-run structural pressures.</p>
<p>Three core findings emerge. First, <strong>mortgage interest rates dominate short-run affordability dynamics.</strong> Descriptive evidence and regression results show sharp relationship patterns that translate into significant declines with mortgage rate increases. In contrast, a counterfactual simulation holding mortgage rates constant at 3% indicates that a substantial share of the post-2021 affordability collapse wouldn’t have occurred absent rapid monetary tightening.</p>
<p>Second, <strong>long-run affordability erosion is driven by consistent divergence between home prices and household incomes</strong>. Real home pricing and income both demonstrate approximately unit elasticity with respect to affordability. This implies that affordability is depends on the inter related growth rates. Over the given sample period, home price growth systematically outpaced income growth, creating latent affordability stress that was exposed when borrowing costs rose.</p>
<p>Third, after having examined various top metro localities, we can conclude that <strong>predominant affordability features are nationally expressed</strong>. This means that affordability is broad-based rather than localized. Distributional analysis over separate time periods also shows a pronounced leftward distribution shift across metros between 2015 and 2023 indicating rising costs affected most housing markets, not only traditionally high-cost regions.</p>
<p>This analysis is full descriptive as opposed to being fully causal. Affordability is mechanically constructed from prices, income, and interest rates, and the regressions should be interpreted as elasticities and decompositions rather than structural causal estimates. In addition, income measures rely on ACS data and imputation assumptions for temporal coverage (i.e., 2000-2009 and intermittent missing metro data). Note: imputation methods are simply last known value replacements and neither factor more complex income model dynamics.</p>
<p>Despite these limitations, the results highlight an important policy implication: interest rate shocks can rapidly and severely constrain housing affordability even when price levels change gradually. While long-run affordability ultimately depends on aligning income growth with housing supply and prices, short-run affordability crises are highly sensitive to financing conditions. Addressing housing affordability therefore requires both structural solutions to housing supply and income growth, and an awareness of how monetary policy interacts with household borrowing capacity.</p>
<p>Future study may find useful historical housing supply and demand versus new housing build construction with the attempt in better understanding housing inventory and the relationship of longer terms pricing pressure on markets.</p>
</section>
<section id="references" class="level1 unnumbered">


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-case_shiller_1989" class="csl-entry" role="listitem">
Case, K. E., &amp; Shiller, R. J. (1989). The efficiency of the market for single-family homes. <em>American Economic Review</em>, <em>79</em>(1), 125–137.
</div>
<div id="ref-fred" class="csl-entry" role="listitem">
Federal Reserve Bank of St. Louis. (2024). <em>Federal reserve economic data (FRED)</em>. <a href="https://fred.stlouisfed.org/">https://fred.stlouisfed.org/</a>
</div>
<div id="ref-glaeser_gyourko_2018" class="csl-entry" role="listitem">
Glaeser, E. L., &amp; Gyourko, J. (2018). The economic implications of housing supply. <em>Journal of Economic Perspectives</em>, <em>32</em>(1), 3–30.
</div>
<div id="ref-poterba_1984" class="csl-entry" role="listitem">
Poterba, J. M. (1984). Tax subsidies to owner-occupied housing: An asset-market approach. <em>Quarterly Journal of Economics</em>, <em>99</em>(4), 729–752.
</div>
<div id="ref-bls_cpi" class="csl-entry" role="listitem">
U.S. Bureau of Labor Statistics. (2023). <em>Consumer price index: Using the CPI for escalation and deflation</em>. <a href="https://www.bls.gov/cpi/factsheets/escalation.htm">https://www.bls.gov/cpi/factsheets/escalation.htm</a>
</div>
<div id="ref-acs" class="csl-entry" role="listitem">
U.S. Census Bureau. (2023). <em>American community survey 5-year estimates</em>. <a href="https://www.census.gov/programs-surveys/acs">https://www.census.gov/programs-surveys/acs</a>
</div>
<div id="ref-zillow_zhvi" class="csl-entry" role="listitem">
Zillow Group. (2024). <em>Zillow home value index (ZHVI)</em>. <a href="https://www.zillow.com/research/data/">https://www.zillow.com/research/data/</a>
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>